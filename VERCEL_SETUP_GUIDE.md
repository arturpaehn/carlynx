# üöÄ Vercel Deployment - Step-by-Step Guide

## ‚úÖ Git Push Complete
–ö–æ–¥ —É–∂–µ –∑–∞–ø—É—à–µ–Ω –≤ GitHub. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—ë—Ç –¥–µ–ø–ª–æ–π.

---

## üìã –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø VERCEL

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/dashboard
2. **–ù–∞–π—Ç–∏ –ø—Ä–æ–µ–∫—Ç:** `carlynx` (–∏–ª–∏ –≤–∞—à–µ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞)
3. **–î–æ–∂–¥–∞—Ç—å—Å—è:** –ü–æ–∫–∞ —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è —Å—Ç–∞–Ω–µ—Ç ‚úÖ **Ready**

---

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è CRON_SECRET

**–í–∞–∂–Ω–æ!** –ë–µ–∑ —ç—Ç–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞ cron job –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

#### 2.1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–∞

**–ù–∞ Mac/Linux/WSL:**
```bash
openssl rand -base64 32
```

**–ù–∞ Windows PowerShell:**
```powershell
$bytes = New-Object byte[] 32
[System.Security.Cryptography.RandomNumberGenerator]::Create().GetBytes($bytes)
[Convert]::ToBase64String($bytes)
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –æ–Ω–ª–∞–π–Ω:**
https://generate-secret.vercel.app/32

**–°–∫–æ–ø–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!** –ù–∞–ø—Ä–∏–º–µ—Ä: `K8Jx2Yv9Qm3Np7Rz5Tw1Hs6Df4Gu0Lp`

#### 2.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/arturpaehn/carlynx/settings/environment-variables
   (–ó–∞–º–µ–Ω–∏ `arturpaehn/carlynx` –Ω–∞ —Å–≤–æ–π –ø—É—Ç—å)

2. **–ù–∞–∂–∞—Ç—å:** "Add New" –∏–ª–∏ "Add Variable"

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å:**
   ```
   Key:   CRON_SECRET
   Value: [–≤—Å—Ç–∞–≤—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç]
   ```

4. **Environments:** –í—ã–±—Ä–∞—Ç—å –≤—Å–µ 3:
   - ‚òëÔ∏è Production
   - ‚òëÔ∏è Preview
   - ‚òëÔ∏è Development

5. **–ù–∞–∂–∞—Ç—å:** "Save"

**–°–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è:**
```
Name                          Value                  Environments
CRON_SECRET                   K8Jx2Yv9Qm...         Production, Preview, Development
NEXT_PUBLIC_SUPABASE_URL      https://...           Production, Preview, Development
SUPABASE_SERVICE_ROLE_KEY     eyJhbGci...           Production, Preview, Development
STRIPE_SECRET_KEY             sk_live_...           Production, Preview, Development
...
```

---

### –®–∞–≥ 3: –†–µ–¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `CRON_SECRET` –Ω—É–∂–µ–Ω —Ä–µ–¥–µ–ø–ª–æ–π:

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/arturpaehn/carlynx/deployments
2. **–ù–∞–π—Ç–∏:** –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π (—Å–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π)
3. **–ù–∞–∂–∞—Ç—å:** –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚ãØ —Å–ø—Ä–∞–≤–∞
4. **–í—ã–±—Ä–∞—Ç—å:** "Redeploy"
5. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å:** "Redeploy"
6. **–î–æ–∂–¥–∞—Ç—å—Å—è:** –°—Ç–∞—Ç—É—Å ‚úÖ Ready

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Cron Job

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/arturpaehn/carlynx/settings/crons
2. **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
   ```
   Path: /api/cron/sync-mars-dealership
   Schedule: 0 14 * * *
   Status: ‚úÖ Active
   ```

**–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `0 14 * * *`:**
- –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
- –í 14:00 UTC (= 5 PM Estonian Time)

---

### –®–∞–≥ 5: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

–ß—Ç–æ–±—ã –Ω–µ –∂–¥–∞—Ç—å –¥–æ 5 PM, –∑–∞–ø—É—Å—Ç–∏ cron –≤—Ä—É—á–Ω—É—é:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Vercel Dashboard (–ø—Ä–æ—â–µ)

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/arturpaehn/carlynx/settings/crons
2. **–ù–∞–π—Ç–∏:** `/api/cron/sync-mars-dealership`
3. **–ù–∞–∂–∞—Ç—å:** "Run Now" –∏–ª–∏ "Trigger"
4. **–î–æ–∂–¥–∞—Ç—å—Å—è:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è (~30-60 —Å–µ–∫—É–Ω–¥)

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ curl (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

**–ù–∞ PowerShell:**
```powershell
$secret = "–¢–í–û–ô_CRON_SECRET"
curl -X GET "https://carlynx.us/api/cron/sync-mars-dealership" -H "Authorization: Bearer $secret"
```

**–ó–∞–º–µ–Ω–∏:**
- `–¢–í–û–ô_CRON_SECRET` - —Å–µ–∫—Ä–µ—Ç –∏–∑ Vercel
- `carlynx.us` - —Ç–≤–æ–π –¥–æ–º–µ–Ω

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "Mars Dealership sync completed",
  "timestamp": "2025-01-09T..."
}
```

---

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://vercel.com/arturpaehn/carlynx/logs
2. **–§–∏–ª—å—Ç—Ä:** –í—ã–±—Ä–∞—Ç—å "Functions"
3. **–ò—Å–∫–∞—Ç—å:** `/api/cron/sync-mars-dealership`

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö:**
```
üöÄ Starting Mars Dealership sync...
‚è∞ Time: 1/9/2025, 2:00:00 PM (Estonian Time)
üîç Fetching Mars Dealership listings...
üìÑ Fetching page 1...
  ‚úÖ Found 10 listings on page 1
üìÑ Fetching page 2...
  ‚úÖ Found 12 listings on page 2
...
‚úÖ Total listings found: 44
üîÑ Syncing 44 listings to database...
‚úÖ Updated/Created listings...
üéâ Sync complete! Processed 44 listings
```

---

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å–∞–π—Ç–µ

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://carlynx.us/
2. **–ò—Å–∫–∞—Ç—å:** –û–±—ä—è–≤–ª–µ–Ω–∏—è —Å –±–µ–π–¥–∂–µ–º **‚≠ê Partner**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –°—á—ë—Ç—á–∏–∫ –≤ —Ñ—É—Ç–µ—Ä–µ –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –Ω–∞ ~44

4. **–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫:** https://carlynx.us/search-results?vehicle_type=car&state_id=1
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (Dallas, TX) —Å –±–µ–π–¥–∂–µ–º Partner

6. **–ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ Partner –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:**
   - –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
   - URL: marsdealership.com

---

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Cron –Ω–µ –ø–æ—è–≤–∏–ª—Å—è –≤ Vercel

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª `vercel.json` –µ—Å—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –°–¥–µ–ª–∞–π —Ä–µ–¥–µ–ø–ª–æ–π (Redeploy)

### –ü—Ä–æ–±–ª–µ–º–∞: "Unauthorized" –≤ –ª–æ–≥–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `CRON_SECRET` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Environment Variables
- –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ë–ï–ó –∫–∞–≤—ã—á–µ–∫
- –°–¥–µ–ª–∞–π —Ä–µ–¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è Partner –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ

**–†–µ—à–µ–Ω–∏–µ 1:** –ü—Ä–æ–≤–µ—Ä—å RLS policies –≤ Supabase
```sql
-- –í Supabase SQL Editor:
SELECT * FROM external_listings WHERE is_active = true LIMIT 5;
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞: Cron –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–æ—Å—å

**–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
1. Vercel Logs ‚Üí Functions
2. –ò—â–∏ –æ—à–∏–±–∫–∏ –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º
3. –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
   - `SUPABASE_SERVICE_ROLE_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - Mars Dealership –∏–∑–º–µ–Ω–∏–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML
   - RLS policies –±–ª–æ–∫–∏—Ä—É—é—Ç INSERT

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] Git push –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] Vercel –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω (‚úÖ Ready)
- [ ] `CRON_SECRET` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Environment Variables
- [ ] –†–µ–¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞
- [ ] Cron –ø–æ—è–≤–∏–ª—Å—è –≤ Settings ‚Üí Crons
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω (Run Now)
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "Sync complete! Processed 44 listings"
- [ ] –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ—è–≤–∏–ª–∏—Å—å Partner –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- [ ] –°—á—ë—Ç—á–∏–∫ –≤ —Ñ—É—Ç–µ—Ä–µ —É–≤–µ–ª–∏—á–∏–ª—Å—è
- [ ] –ü–æ–∏—Å–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- [ ] –ö–ª–∏–∫ –Ω–∞ Partner –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç marsdealership.com

---

## üìÖ –ì—Ä–∞—Ñ–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
- –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ **5:00 PM Estonian Time (EET)**
- –≠—Ç–æ **14:00 UTC** (–∑–∏–º–æ–π) –∏–ª–∏ **13:00 UTC** (–ª–µ—Ç–æ–º)
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~30-60 —Å–µ–∫—É–Ω–¥
- –û–±–Ω–æ–≤–ª—è–µ—Ç/–¥–æ–±–∞–≤–ª—è–µ—Ç ~44 –æ–±—ä—è–≤–ª–µ–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:** –ó–∞–≤—Ç—Ä–∞ –≤ 5 PM

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ Mars Dealership –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –õ–æ–≥–∏: https://vercel.com/arturpaehn/carlynx/logs
- Cron —Å—Ç–∞—Ç—É—Å: https://vercel.com/arturpaehn/carlynx/settings/crons
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: Supabase Dashboard ‚Üí Table Editor ‚Üí external_listings

**–í–æ–ø—Ä–æ—Å—ã?** –ü—Ä–æ–≤–µ—Ä—å `MARS_DEALERSHIP_INTEGRATION.md`
