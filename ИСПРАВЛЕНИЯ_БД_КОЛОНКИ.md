# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: max_active_listings ‚Üí listing_limit

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–ª–æ–Ω–∫—É `listing_limit`, –Ω–æ –∫–æ–¥ –≤–µ–∑–¥–µ –ø—ã—Ç–∞–ª—Å—è —á–∏—Ç–∞—Ç—å `max_active_listings`

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### TypeScript/React
1. **src/app/dealer/add-listing/page.tsx**
   - ‚úÖ –ò–∑–º–µ–Ω—ë–Ω interface TierInfo: `max_active_listings` ‚Üí `listing_limit`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã (4 –º–µ—Å—Ç–∞)

2. **src/app/dealer/my-listings/page.tsx**
   - ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è tierData

3. **src/app/dealer/dashboard/page.tsx**
   - ‚úÖ –ò–∑–º–µ–Ω—ë–Ω interface TierInfo: `max_active_listings` ‚Üí `listing_limit`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã (3 –º–µ—Å—Ç–∞)
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞: `'trialing'` ‚Üí `'trial'`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Å—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞

4. **src/app/dealer/subscription/page.tsx**
   - ‚úÖ –ò–∑–º–µ–Ω—ë–Ω interface SubscriptionTier: `max_active_listings` ‚Üí `listing_limit`

5. **src/app/api/dealer/create-subscription/route.ts**
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –≤ Stripe checkout (2 –º–µ—Å—Ç–∞)

### SQL —Ñ–∞–π–ª—ã
6. **dealer_test_queries.sql**
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (9 –º–µ—Å—Ç)
   - ‚úÖ –í—Å–µ SELECT, WHERE, GROUP BY —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `listing_limit`

### –£–¥–∞–ª—ë–Ω–Ω—ã–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã
- ‚ùå check_and_fix_pricing.sql (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
- ‚ùå test-stripe-webhook.js (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
- ‚ùå –ü–†–û–í–ï–†–¨_–¶–ï–ù–´_–í_–ë–î.md (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
- ‚ùå –ë–´–°–¢–†–û–ï_–†–ï–®–ï–ù–ò–ï_–ë–î.md (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)

## üéØ –ò—Ç–æ–≥–æ
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 6
- **–£–¥–∞–ª–µ–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö:** 4
- **–í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** ~30 –º–µ—Å—Ç

## ‚úÖ –°—Ç–∞—Ç—É—Å
–í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `max_active_listings` —É–¥–∞–ª–µ–Ω—ã –∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.  
–í—Å–µ TypeScript —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.  
Webhook –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Stripe —Å—Ç–∞—Ç—É—Å 'trialing' ‚Üí 'trial'.

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?
```bash
npm run dev
```

–ó–∞—Ç–µ–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π:
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–æ–∫: `/dealer/subscription` 
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: `/dealer/add-listing`
3. –î–∞—à–±–æ—Ä–¥: `/dealer/dashboard`
